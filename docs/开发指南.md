# å´”å­ç‘¾è¯±æ•å™¨ - å¼€å‘æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### ç¯å¢ƒè¦æ±‚
- Node.js 16.0+ (æ¨è 18.0+)
- npm 8.0+ æˆ– yarn 1.22+
- Git 2.30+
- VS Code (æ¨è)
- macOS/Windows/Linux (æ”¯æŒè·¨å¹³å°)

### âš¡ ä¸€é”®å¯åŠ¨ (æ¨è)

é¡¹ç›®æä¾›äº†ä¸€é”®å¯åŠ¨è„šæœ¬ï¼Œè‡ªåŠ¨å¤„ç†ç¯å¢ƒæ£€æŸ¥ã€ä¾èµ–å®‰è£…å’Œåº”ç”¨å¯åŠ¨ï¼š

```bash
# macOS/Linux
chmod +x quick-start.sh
./quick-start.sh

# ä½¿ç”¨ä¸­å›½é•œåƒæº (ç½‘ç»œè¾ƒæ…¢æ—¶æ¨è)
./quick-start.sh --china

# æŸ¥çœ‹å¸®åŠ©
./quick-start.sh --help
```

### ğŸ“‹ æ‰‹åŠ¨å¯åŠ¨æ­¥éª¤

å¦‚æœéœ€è¦æ‰‹åŠ¨æ§åˆ¶å¯åŠ¨è¿‡ç¨‹ï¼š

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd website_version2

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 4. åœ¨æ–°ç»ˆç«¯å¯åŠ¨Electronåº”ç”¨
npm run electron:dev
```

### ğŸ”§ å¯åŠ¨åçš„æ“ä½œ

1. **é¦–æ¬¡è®¾ç½®**
   - åº”ç”¨å¯åŠ¨åä¼šæ˜¾ç¤ºé¦–æ¬¡è®¾ç½®é¡µé¢
   - è®¾ç½®ç®¡ç†å‘˜å¯†ç ï¼ˆè‡³å°‘6ä¸ªå­—ç¬¦ï¼‰
   - å®Œæˆåˆå§‹åŒ–é…ç½®

2. **å¯åŠ¨ç½‘ç«™æ‹¦æˆªåŠŸèƒ½**
   - ç™»å½•åè¿›å…¥æ§åˆ¶å°
   - åœ¨"ä»£ç†æ§åˆ¶"é¡µé¢å¯åŠ¨ä»£ç†æœåŠ¡å™¨
   - **ç³»ç»Ÿä»£ç†ä¼šè‡ªåŠ¨é…ç½®** (ä¿®å¤åçš„æ ¸å¿ƒåŠŸèƒ½)
   - åœ¨"ç½‘ç«™ç®¡ç†"é¡µé¢æ·»åŠ è¦æ‹¦æˆªçš„ç½‘ç«™
   - å¯ç”¨ç½‘ç«™æ‹¦æˆªå¼€å…³

3. **éªŒè¯æ‹¦æˆªæ•ˆæœ**
   - ä½¿ç”¨æµè§ˆå™¨è®¿é—®è¢«æ‹¦æˆªçš„ç½‘ç«™
   - åº”è¯¥æ˜¾ç¤ºæ‹¦æˆªé¡µé¢è€Œä¸æ˜¯åŸç½‘ç«™å†…å®¹

### ğŸ› ï¸ å¼€å‘ç¯å¢ƒè®¾ç½®

å¦‚æœéœ€è¦ä»å¤´å¼€å§‹è®¾ç½®å¼€å‘ç¯å¢ƒï¼š

```bash
# 1. åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir å´”å­ç‘¾è¯±æ•å™¨
cd å´”å­ç‘¾è¯±æ•å™¨

# 2. åˆå§‹åŒ–é¡¹ç›®
npm init -y

# 3. å®‰è£…æ ¸å¿ƒä¾èµ–
npm install electron react react-dom typescript
npm install -D @types/react @types/react-dom @types/node
npm install -D electron-builder webpack vite
npm install -D eslint prettier tailwindcss

# 4. åˆ›å»ºé¡¹ç›®ç»“æ„
mkdir -p src/{main,renderer,shared}
mkdir -p docs assets scripts tests
```

## ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

```
å´”å­ç‘¾è¯±æ•å™¨/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                    # Electronä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ index.ts            # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ app/                # åº”ç”¨æ§åˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AppController.ts
â”‚   â”‚   â”‚   â””â”€â”€ WindowManager.ts
â”‚   â”‚   â”œâ”€â”€ proxy/              # ä»£ç†æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ProxyServer.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ HttpHandler.ts
â”‚   â”‚   â”‚   â””â”€â”€ HttpsHandler.ts
â”‚   â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ security/           # å®‰å…¨æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessProtection.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigEncryption.ts
â”‚   â”‚   â”‚   â””â”€â”€ BypassDetection.ts
â”‚   â”‚   â””â”€â”€ system/             # ç³»ç»Ÿé›†æˆ
â”‚   â”‚       â”œâ”€â”€ SystemIntegration.ts
â”‚   â”‚       â””â”€â”€ CertificateManager.ts
â”‚   â”œâ”€â”€ renderer/               # Reactæ¸²æŸ“è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ index.tsx          # æ¸²æŸ“è¿›ç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ App.tsx            # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPage.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SettingsPage.tsx
â”‚   â”‚   â”œâ”€â”€ components/        # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â””â”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ shared/                # å…±äº«ä»£ç 
â”‚       â”œâ”€â”€ types/             # TypeScriptç±»å‹
â”‚       â”œâ”€â”€ constants/         # å¸¸é‡å®šä¹‰
â”‚       â””â”€â”€ utils/             # å…±äº«å·¥å…·
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”œâ”€â”€ assets/                    # é™æ€èµ„æº
â”œâ”€â”€ scripts/                   # æ„å»ºè„šæœ¬
â”œâ”€â”€ tests/                     # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ dist/                      # æ„å»ºè¾“å‡º
```

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### 1. TypeScripté…ç½®
```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020", "DOM"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "baseUrl": "./src",
    "paths": {
      "@main/*": ["main/*"],
      "@renderer/*": ["renderer/*"],
      "@shared/*": ["shared/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### 2. Electroné…ç½®
```json
// electron.json
{
  "main": "dist/main/index.js",
  "homepage": "./",
  "scripts": {
    "electron": "electron .",
    "electron:dev": "NODE_ENV=development electron .",
    "electron:pack": "electron-builder"
  }
}
```

### 3. Viteé…ç½® (æ¸²æŸ“è¿›ç¨‹)
```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  base: './',
  build: {
    outDir: 'dist/renderer',
    emptyOutDir: true,
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src/renderer'),
      '@shared': path.resolve(__dirname, 'src/shared'),
    },
  },
  server: {
    port: 3000,
  },
});
```

### 4. Tailwind CSSé…ç½®
```javascript
// tailwind.config.js
module.exports = {
  content: ['./src/renderer/**/*.{js,jsx,ts,tsx}'],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
        },
        gray: {
          50: '#f9fafb',
          100: '#f3f4f6',
          900: '#111827',
        },
      },
      fontFamily: {
        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto'],
      },
      borderRadius: {
        'xl': '1rem',
        '2xl': '1.5rem',
      },
    },
  },
  plugins: [],
};
```

## ğŸ“ ç¼–ç è§„èŒƒ

### 1. æ–‡ä»¶å‘½åè§„èŒƒ
- ç»„ä»¶æ–‡ä»¶ï¼šPascalCase (ä¾‹: `LoginPage.tsx`)
- å·¥å…·æ–‡ä»¶ï¼šcamelCase (ä¾‹: `urlValidator.ts`)
- å¸¸é‡æ–‡ä»¶ï¼šUPPER_SNAKE_CASE (ä¾‹: `API_ENDPOINTS.ts`)
- ç±»å‹æ–‡ä»¶ï¼šPascalCase (ä¾‹: `UserTypes.ts`)

### 2. ä»£ç é£æ ¼
```typescript
// æ¥å£å®šä¹‰
interface BlockedSite {
  id: string;
  url: string;
  domain: string;
  enabled: boolean;
  createdAt: Date;
  updatedAt: Date;
}

// ç»„ä»¶å®šä¹‰
interface SiteCardProps {
  site: BlockedSite;
  onToggle: (id: string) => void;
  onDelete: (id: string) => void;
}

export const SiteCard: React.FC<SiteCardProps> = ({ 
  site, 
  onToggle, 
  onDelete 
}) => {
  const handleToggle = useCallback(() => {
    onToggle(site.id);
  }, [site.id, onToggle]);

  return (
    <div className="bg-white rounded-xl shadow-sm p-4">
      {/* ç»„ä»¶å†…å®¹ */}
    </div>
  );
};
```

### 3. Gitæäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

ç¤ºä¾‹:
feat: æ·»åŠ ç½‘ç«™é»‘åå•ç®¡ç†åŠŸèƒ½
fix: ä¿®å¤ä»£ç†æœåŠ¡å™¨å¯åŠ¨å¤±è´¥çš„é—®é¢˜
docs: æ›´æ–°APIæ–‡æ¡£
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•
```typescript
// tests/unit/utils/urlValidator.test.ts
import { validateUrl } from '@shared/utils/urlValidator';

describe('URL Validator', () => {
  test('should validate correct URLs', () => {
    expect(validateUrl('https://example.com')).toBe(true);
    expect(validateUrl('http://test.org')).toBe(true);
  });

  test('should reject invalid URLs', () => {
    expect(validateUrl('invalid-url')).toBe(false);
    expect(validateUrl('')).toBe(false);
  });
});
```

### 2. é›†æˆæµ‹è¯•
```typescript
// tests/integration/proxy.test.ts
import { ProxyServer } from '@main/proxy/ProxyServer';

describe('Proxy Server Integration', () => {
  let proxyServer: ProxyServer;

  beforeEach(() => {
    proxyServer = new ProxyServer();
  });

  test('should block configured domains', async () => {
    await proxyServer.start({ port: 8080, blockedDomains: ['example.com'] });
    
    // æµ‹è¯•æ‹¦æˆªåŠŸèƒ½
    const response = await fetch('http://example.com', {
      agent: new HttpProxyAgent('http://localhost:8080')
    });
    
    expect(response.status).toBe(200);
    expect(await response.text()).toContain('è®¿é—®è¢«é˜»æ­¢');
  });
});
```

### 3. E2Eæµ‹è¯•
```typescript
// tests/e2e/app.test.ts
import { Application } from 'spectron';

describe('Application E2E', () => {
  let app: Application;

  beforeEach(async () => {
    app = new Application({
      path: './dist/main/index.js'
    });
    await app.start();
  });

  afterEach(async () => {
    if (app && app.isRunning()) {
      await app.stop();
    }
  });

  test('should show login page on startup', async () => {
    const title = await app.client.getTitle();
    expect(title).toBe('å´”å­ç‘¾è¯±æ•å™¨');
    
    const loginForm = await app.client.$('#login-form');
    expect(await loginForm.isDisplayed()).toBe(true);
  });
});
```

## ğŸ”¨ æ„å»ºå’Œéƒ¨ç½²

### 1. å¼€å‘æ¨¡å¼
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# å•ç‹¬å¯åŠ¨ä¸»è¿›ç¨‹
npm run dev:main

# å•ç‹¬å¯åŠ¨æ¸²æŸ“è¿›ç¨‹
npm run dev:renderer
```

### 2. ç”Ÿäº§æ„å»º
```bash
# æ„å»ºæ‰€æœ‰ä»£ç 
npm run build

# æ‰“åŒ…åº”ç”¨
npm run dist

# å¹³å°ç‰¹å®šæ‰“åŒ…
npm run dist:mac
npm run dist:win
npm run dist:linux
```

### 3. è°ƒè¯•æŠ€å·§
```typescript
// ä¸»è¿›ç¨‹è°ƒè¯•
console.log('Main process debug info');

// æ¸²æŸ“è¿›ç¨‹è°ƒè¯•
if (process.env.NODE_ENV === 'development') {
  console.log('Renderer debug info');
}

// ä½¿ç”¨Electron DevTools
app.whenReady().then(() => {
  if (process.env.NODE_ENV === 'development') {
    const { default: installExtension, REACT_DEVELOPER_TOOLS } = require('electron-devtools-installer');
    installExtension(REACT_DEVELOPER_TOOLS);
  }
});
```

## ğŸ“š å¸¸ç”¨å‘½ä»¤

```bash
# é¡¹ç›®ç®¡ç†
npm install                    # å®‰è£…ä¾èµ–
npm run clean                  # æ¸…ç†æ„å»ºæ–‡ä»¶
npm run lint                   # ä»£ç æ£€æŸ¥
npm run format                 # ä»£ç æ ¼å¼åŒ–

# å¼€å‘è°ƒè¯•
npm run dev                    # å¼€å‘æ¨¡å¼
npm run test                   # è¿è¡Œæµ‹è¯•
npm run test:watch             # ç›‘å¬æµ‹è¯•
npm run test:coverage          # æµ‹è¯•è¦†ç›–ç‡

# æ„å»ºéƒ¨ç½²
npm run build                  # æ„å»ºé¡¹ç›®
npm run dist                   # æ‰“åŒ…åº”ç”¨
npm run release                # å‘å¸ƒç‰ˆæœ¬
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. æƒé™é—®é¢˜
```bash
# macOS/Linux æƒé™ä¸è¶³
sudo npm run dist

# Windows éœ€è¦ç®¡ç†å‘˜æƒé™
# å³é”®ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
```

### 2. è¯ä¹¦é—®é¢˜
```typescript
// å¼€å‘ç¯å¢ƒè·³è¿‡è¯ä¹¦éªŒè¯
process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';
```

### 3. ä»£ç†é…ç½®é—®é¢˜
```typescript
// æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
const net = require('net');
const server = net.createServer();

server.listen(port, (err) => {
  if (err) {
    console.log(`Port ${port} is in use`);
  } else {
    console.log(`Port ${port} is available`);
    server.close();
  }
});
```

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**æœ€åæ›´æ–°ï¼š** 2025-06-28
